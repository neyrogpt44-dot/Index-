<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGSHOP138 | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --fire-red: #ff0000; --bg: #000; --border: #1a1a1a; --text: #fff; }
        * { box-sizing: border-box; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; }

        /* --- FIREBOX STYLE HEADER --- */
        .header { position: sticky; top: 0; z-index: 1000; background: #000; border-bottom: 1px solid var(--border); }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 15px 40px; max-width: 1440px; margin: 0 auto; }
        .logo-box img { height: 40px; filter: drop-shadow(0 0 10px rgba(255,0,0,0.5)); }
        
        .header-nav { display: flex; justify-content: center; gap: 30px; border-bottom: 1px solid var(--border); padding: 12px 0; background: #000; }
        .nav-link { font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #888; cursor: pointer; text-decoration: none; transition: 0.3s; }
        .nav-link:hover, .nav-link.active { color: #fff; border-bottom: 2px solid var(--fire-red); }

        .icon-group { display: flex; gap: 20px; font-size: 20px; cursor: pointer; }
        .cart-badge { background: var(--fire-red); color: #fff; font-size: 10px; padding: 2px 6px; border-radius: 10px; vertical-align: top; }

        /* --- VIDEO LANDING --- */
        #hero-section { position: relative; height: 85vh; width: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .video-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .hero-overlay { z-index: 10; text-align: center; }
        .hero-title { font-size: 60px; font-weight: 900; text-transform: uppercase; margin-bottom: 20px; letter-spacing: -2px; }
        .shop-now-btn { background: #fff; color: #000; border: none; padding: 20px 50px; font-weight: 900; font-size: 14px; text-transform: uppercase; cursor: pointer; transition: 0.3s; }
        .shop-now-btn:hover { background: var(--fire-red); color: #fff; }

        /* --- CATALOG & CARDS (FIREBOX UX) --- */
        .container { max-width: 1440px; margin: 0 auto; padding: 60px 20px; }
        .section-title { font-size: 32px; font-weight: 900; margin-bottom: 40px; text-transform: uppercase; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 2px; background: var(--border); border: 1px solid var(--border); }
        .card { background: #000; transition: 0.4s; padding: 20px; display: flex; flex-direction: column; cursor: pointer; }
        .card:hover { background: #080808; }
        .card:hover img { transform: scale(1.05); }

        .img-wrap { height: 350px; display: flex; align-items: center; justify-content: center; padding: 20px; overflow: hidden; }
        .img-wrap img { max-width: 100%; max-height: 100%; object-fit: contain; transition: 0.6s cubic-bezier(0.165, 0.84, 0.44, 1); }
        
        .card-info { padding-top: 20px; border-top: 1px solid var(--border); margin-top: 10px; }
        .card-cat { color: var(--fire-red); font-size: 10px; font-weight: 900; text-transform: uppercase; margin-bottom: 8px; }
        .card-name { font-size: 16px; font-weight: 400; color: #eee; height: 44px; overflow: hidden; margin-bottom: 15px; }
        .card-bottom { display: flex; justify-content: space-between; align-items: center; }
        .price { font-size: 24px; font-weight: 900; letter-spacing: -1px; }
        .add-btn { background: transparent; border: 1px solid #333; color: #fff; width: 40px; height: 40px; font-size: 20px; cursor: pointer; transition: 0.3s; }
        .card:hover .add-btn { background: #fff; color: #000; border-color: #fff; }

        /* --- CART SIDEBAR --- */
        #cart-panel { position: fixed; right: -100%; top: 0; width: 450px; height: 100%; background: #000; z-index: 5000; transition: 0.5s; padding: 40px; border-left: 1px solid var(--border); }
        #cart-panel.active { right: 0; }
        .cart-title { font-size: 28px; font-weight: 900; border-bottom: 1px solid var(--border); padding-bottom: 20px; margin-bottom: 20px; }
        .checkout-btn { background: var(--fire-red); color: #fff; border: none; width: 100%; padding: 20px; font-weight: 900; margin-top: 30px; cursor: pointer; }

        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr 1fr; }
            .hero-title { font-size: 32px; }
            #cart-panel { width: 100%; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="header-top">
            <div class="icon-group">üîç</div>
            <div class="logo-box">
                <img src="santa.png" alt="SGSHOP138">
            </div>
            <div class="icon-group" onclick="toggleCart()">
                üõí<span class="cart-badge" id="cart-count">0</span>
            </div>
        </div>
        <nav class="header-nav">
            <div class="nav-link active" onclick="filterBy('all', this)">–ù–æ–≤–∏–Ω–∫–∏</div>
            <div class="nav-link" onclick="filterBy('Nike', this)">Nike</div>
            <div class="nav-link" onclick="filterBy('Jordan', this)">Jordan</div>
            <div class="nav-link" onclick="filterBy('Adidas', this)">Adidas</div>
            <div class="nav-link" onclick="filterBy('Yeezy', this)">Yeezy</div>
            <div class="nav-link" onclick="filterBy('–û–¥–µ–∂–¥–∞', this)">–û–¥–µ–∂–¥–∞</div>
        </nav>
    </header>

    <section id="hero-section">
        <video class="video-bg" autoplay muted loop playsinline>
            <source src="https://assets.mixkit.co/videos/preview/mixkit-fashion-model-showing-his-sneakers-34544-large.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay">
            <h1 class="hero-title">FALL / WINTER 26</h1>
            <button class="shop-now-btn" onclick="document.getElementById('catalog-start').scrollIntoView()">–°–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é</button>
        </div>
    </section>

    <main class="container" id="catalog-start">
        <h2 class="section-title">–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–µ–π—á–∞—Å</h2>
        <div class="grid" id="product-grid">
            </div>
    </main>

    <div id="cart-panel">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 class="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <span onclick="toggleCart()" style="cursor:pointer; font-size:30px;">‚úï</span>
        </div>
        <div id="cart-items" style="max-height: 60vh; overflow-y: auto;"></div>
        <div id="cart-total" style="font-size: 24px; font-weight: 900; margin-top: 20px;">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
        <button class="checkout-btn" onclick="sendOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram</button>
    </div>

    <script>
        let products = [];
        let cart = [];

        async function init() {
            try {
                const res = await fetch('/api/get');
                const xml = new DOMParser().parseFromString(await res.text(), "text/xml");
                products = Array.from(xml.querySelectorAll("offer")).map(el => ({
                    id: el.getAttribute('id'),
                    name: el.querySelector("name")?.textContent || "Limited Edition",
                    price: parseInt(el.querySelector("price")?.textContent || "0"),
                    img: el.querySelector("picture")?.textContent || ""
                }));
                render(products.slice(0, 100));
            } catch (e) { console.error("API error"); }
        }

        function render(data) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = data.map(p => `
                <div class="card" onclick="addToCart('${p.id}')">
                    <div class="img-wrap"><img src="${p.img}" loading="lazy"></div>
                    <div class="card-info">
                        <div class="card-cat">Authentic Only</div>
                        <div class="card-name">${p.name}</div>
                        <div class="card-bottom">
                            <div class="price">${p.price.toLocaleString()} ‚ÇΩ</div>
                            <button class="add-btn">+</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(id) {
            const p = products.find(x => x.id === id);
            cart.push(p);
            updateCart();
            toggleCart(true);
        }

        function updateCart() {
            document.getElementById('cart-count').innerText = cart.length;
            const itemsDiv = document.getElementById('cart-items');
            let total = 0;
            itemsDiv.innerHTML = cart.map((p, i) => {
                total += p.price;
                return `<div style="display:flex; gap:15px; margin-bottom:20px; align-items:center; background:#111; padding:10px;">
                    <img src="${p.img}" style="width:60px; height:60px; object-fit:contain;">
                    <div style="flex-grow:1; font-size:12px;">${p.name}</div>
                    <div style="font-weight:900;">${p.price.toLocaleString()}‚ÇΩ</div>
                </div>`;
            }).join('');
            document.getElementById('cart-total').innerText = `–ò—Ç–æ–≥–æ: ${total.toLocaleString()} ‚ÇΩ`;
        }

        function toggleCart(open = false) {
            const panel = document.getElementById('cart-panel');
            if(open) panel.classList.add('active');
            else panel.classList.toggle('active');
        }

        function filterBy(brand, el) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            el.classList.add('active');
            const data = brand === 'all' ? products.slice(0, 100) : products.filter(p => p.name.toLowerCase().includes(brand.toLowerCase()));
            render(data);
        }

        function sendOrder() {
            if(!cart.length) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
            let text = "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ SGSHOP138:\n\n";
            cart.forEach((p, i) => text += `${i+1}. ${p.name} - ${p.price}‚ÇΩ\n`);
            text += `\n–í—Å–µ–≥–æ: ${document.getElementById('cart-total').innerText}`;
            window.open(`https://t.me/–¢–í–û–ô_–ù–ò–ö?text=${encodeURIComponent(text)}`);
        }

        init();
    </script>
</body>
</html>
